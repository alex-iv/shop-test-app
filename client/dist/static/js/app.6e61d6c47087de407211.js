webpackJsonp([1],{FhoZ:function(t,e,a){"use strict";(function(e){const n=a("o/zv");t.exports={serverUrl:"http://localhost:3000",dev:{assetsSubDirectory:"static",assetsPublicPath:"/",proxyTable:{},host:"localhost",port:8080,autoOpenBrowser:!1,errorOverlay:!0,notifyOnErrors:!0,poll:!1,devtool:"cheap-module-eval-source-map",cacheBusting:!0,cssSourceMap:!0},build:{index:n.resolve(e,"../dist/index.html"),assetsRoot:n.resolve(e,"../dist"),assetsSubDirectory:"static",assetsPublicPath:"./",productionSourceMap:!0,devtool:"#source-map",productionGzip:!1,productionGzipExtensions:["js","css"],bundleAnalyzerReport:Object({NODE_ENV:"production"}).npm_config_report}}}).call(e,"/")},I2co:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("7+uW"),r=a("BO1k"),s=a.n(r),o=a("M4fF"),i=a.n(o),c=a("7t+N"),l=a.n(c),u=a("mtWM"),v=a.n(u),p=a("FhoZ"),d=a.n(p),h={name:"App",data:function(){return{dailyExchangeRatesTable:null,userCartCostsByCurrenciesMessage:"",goods:[{id:"1",name:"Ноутбук",price:null,currency:"USD",quantity:0,base:{currency:"USD",price:1e3}},{id:"2",name:"Телевизор",price:null,currency:"RUR",quantity:0,base:{currency:"RUR",price:64e3}},{id:"3",name:"Игровая приставка",price:null,currency:"EUR",quantity:0,base:{currency:"EUR",price:350}}],totalCount:0}},created:function(){var t=!0,e=!1,a=void 0;try{for(var n,r=s()(this.goods);!(t=(n=r.next()).done);t=!0){var o=n.value;this.totalCount+=o.quantity}}catch(t){e=!0,a=t}finally{try{!t&&r.return&&r.return()}finally{if(e)throw a}}},mounted:function(){l()(".toast").toast({autohide:!1})},methods:{recalculatePrice:function(t){if(t.base.currency==t.currency)t.price=t.base.price;else{var e=i.a.get(this.dailyExchangeRatesTable,[t.base.currency,t.currency],null);null!=e&&(t.price=t.base.price*e,t.price=Math.round(100*t.price)/100)}},onDeleteItem:function(t){t.quantity>0&&(t.quantity--,this.totalCount--)},onAppendItem:function(t){t.quantity++,this.totalCount++},onCurrencyChange:function(t){var e=this;null==e.dailyExchangeRatesTable?v.a.get(d.a.serverUrl+"/shop/shop-api/exchange-rates").then(function(a){e.dailyExchangeRatesTable=a.data,e.recalculatePrice(t)}).catch(function(t){console.log(t)}):e.recalculatePrice(t)},onCalculateCart:function(){var t=this,e=i.a.chain(this.goods).filter(function(t){return 0!=t.quantity}).value();v.a.post(d.a.serverUrl+"/shop/shop-api/calc-user-cart",e).then(function(e){t.userCartCostsByCurrenciesMessage="Всего товаров: "+e.data.totalCount+"<br />USD: "+e.data.USD+"<br />RUR: "+e.data.RUR+"<br />EUR: "+e.data.EUR+"<br />",l()(".toast").toast("show")}).catch(function(t){console.log(t)})}}},_={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"container"},[t._m(0),t._v(" "),a("h4",[t._v("Корзина")]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col col-lg-12"},[a("table",{staticClass:"table table-striped"},[t._m(1),t._v(" "),a("tbody",t._l(t.goods,function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.name))]),t._v(" "),a("td",[a("select",{directives:[{name:"model",rawName:"v-model",value:e.currency,expression:"item.currency"}],on:{change:[function(a){var n=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(e,"currency",a.target.multiple?n:n[0])},function(a){return t.onCurrencyChange(e)}]}},[a("option",{attrs:{value:"USD"}},[t._v("USD")]),t._v(" "),a("option",{attrs:{value:"RUR"}},[t._v("RUR")]),t._v(" "),a("option",{attrs:{value:"EUR"}},[t._v("EUR")])])]),t._v(" "),a("td",[t._v(t._s(null==e.price?e.base.price:e.price))]),t._v(" "),a("td",[a("button",{staticClass:"btn btn-light",attrs:{type:"button"},on:{click:function(a){return t.onDeleteItem(e)}}},[t._v("-")]),t._v(" "),a("button",{staticClass:"btn btn-light",attrs:{type:"button"},on:{click:function(a){return t.onAppendItem(e)}}},[t._v("+")])]),t._v(" "),a("td",[t._v(t._s(e.quantity))])])}),0),t._v(" "),a("tfoot",[a("tr",[a("td"),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("td",[t._v("Общее количество товаров:")]),t._v(" "),a("td",{attrs:{id:"totalStars"}},[t._v(t._s(t.totalCount))])])])])]),t._v(" "),a("div",{staticClass:"col offset-lg-10 col-lg-2"},[a("button",{staticClass:"btn btn-block btn-primary",attrs:{id:"calculate",type:"button"},on:{click:t.onCalculateCart}},[t._v("Посчитать")])])])]),t._v(" "),a("div",{staticClass:"d-flex justify-content-center align-items-center",staticStyle:{"min-height":"200px"},attrs:{id:"el","aria-live":"polite","aria-atomic":"true"}},[a("div",{staticClass:"toast",staticStyle:{position:"absolute",top:"10px",right:"auto","min-width":"300px"},attrs:{role:"alert","aria-live":"assertive","aria-atomic":"true"}},[t._m(2),t._v(" "),a("div",{staticClass:"toast-body",domProps:{innerHTML:t._s(t.userCartCostsByCurrenciesMessage)}})])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("nav",{staticClass:"navbar navbar-light bg-light"},[e("a",{staticClass:"navbar-brand",attrs:{href:"#"}},[this._v("Shop")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("Название")]),t._v(" "),a("th",[t._v("Валюта")]),t._v(" "),a("th",[t._v("Цена")]),t._v(" "),a("th",[t._v("Удалить/Добавить")]),t._v(" "),a("th",[t._v("Количество")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"toast-header"},[e("strong",{staticClass:"mr-auto"},[this._v("Общая стоимость товаров в корзине в разных валютах")]),this._v(" "),e("button",{staticClass:"ml-2 mb-1 close",attrs:{type:"button","data-dismiss":"toast","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])])}]};var b=a("VU/8")(h,_,!1,function(t){a("I2co")},null,null).exports;a("K3J8"),a("qb6w"),a("ao2D"),a("rk6y");n.a.config.productionTip=!1,new n.a({el:"#app",components:{App:b},template:"<App/>"})},ao2D:function(t,e){},qb6w:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.6e61d6c47087de407211.js.map